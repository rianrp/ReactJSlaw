{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/alans/OneDrive/\\xC1rea de Trabalho/teste/Firebaseproject/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/alans/OneDrive/\\xC1rea de Trabalho/teste/Firebaseproject/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/alans/OneDrive/\\xC1rea de Trabalho/teste/Firebaseproject/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/alans/OneDrive/\\xC1rea de Trabalho/teste/Firebaseproject/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import firebase from'firebase/app';import'firebase/firestore';import'firebase/auth';import{useAuthState}from'react-firebase-hooks/auth';import{useCollectionData}from'react-firebase-hooks/firestore';import{useContext,useEffect}from'react';import{Navigate}from'react-router-dom';import{AuthGoogleContext}from'../../contexts/authGoogle';import{addDoc,collection,doc,getDocs,getFirestore}from'firebase/firestore';import{app}from'../../services/firebaseConfig';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Home=function Home(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),mensagem=_useState4[0],setMensagem=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useContext=useContext(AuthGoogleContext),user=_useContext.user,signOut=_useContext.signOut;var db=getFirestore(app);var userCollect=collection(db,\"users\");var HandleChange=function HandleChange(event){setMensagem(event.target.value);setName(user.displayName);};function CreateMensage(){return _CreateMensage.apply(this,arguments);}function _CreateMensage(){_CreateMensage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var usuario;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return addDoc(userCollect,{mensagem:mensagem,name:name});case 2:usuario=_context2.sent;console.log(usuario);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _CreateMensage.apply(this,arguments);}useEffect(function(){var getUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data,us;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getDocs(userCollect);case 2:data=_context.sent;us=data.docs.map(function(doc){return _objectSpread(_objectSpread({},doc.data()),{},{id:doc.id});});console.log(us);setUsers(us);case 6:case\"end\":return _context.stop();}}},_callee);}));return function getUsers(){return _ref.apply(this,arguments);};}();getUsers();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return signOut();},children:\"Sair\"}),/*#__PURE__*/_jsxs(\"h1\",{children:[\"Bem vindo \",user.displayName,\" Teste beta do FIREBASE em um dominio free\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Mensagem...\",value:mensagem,onChange:HandleChange}),/*#__PURE__*/_jsx(\"button\",{onClick:CreateMensage,children:\"Criar\"}),users.map(function(user){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:user.name}),/*#__PURE__*/_jsx(\"h1\",{children:user.mensagem})]},user.id);})]});};","map":{"version":3,"names":["React","useState","firebase","useAuthState","useCollectionData","useContext","useEffect","Navigate","AuthGoogleContext","addDoc","collection","doc","getDocs","getFirestore","app","Home","users","setUsers","mensagem","setMensagem","name","setName","user","signOut","db","userCollect","HandleChange","event","target","value","displayName","CreateMensage","usuario","console","log","getUsers","data","us","docs","map","id"],"sources":["C:/Users/alans/OneDrive/Área de Trabalho/teste/Firebaseproject/src/pages/home/index.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport firebase from 'firebase/app'\r\nimport 'firebase/firestore';\r\nimport 'firebase/auth'\r\nimport { useAuthState } from 'react-firebase-hooks/auth';\r\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\r\nimport { useContext, useEffect } from 'react'\r\nimport { Navigate } from 'react-router-dom';\r\nimport { AuthGoogleContext } from '../../contexts/authGoogle'\r\nimport { addDoc, collection, doc, getDocs, getFirestore } from 'firebase/firestore';\r\nimport { app } from '../../services/firebaseConfig';\r\n\r\n\r\nexport const Home = () => {\r\n    const [users, setUsers] = useState([]);\r\n    const [mensagem, setMensagem] = useState()\r\n    const [name, setName] = useState();\r\n    const { user, signOut } = useContext(AuthGoogleContext)\r\n    const db = getFirestore(app);\r\n    const userCollect = collection(db, \"users\")\r\n\r\n    const HandleChange = (event) => {\r\n        setMensagem(event.target.value)\r\n        setName(user.displayName)\r\n    }\r\n\r\n    async function CreateMensage(){\r\n        const usuario = await addDoc(userCollect, {\r\n            mensagem,\r\n            name\r\n        });\r\n        console.log(usuario)\r\n    }\r\n\r\n    useEffect(() => {\r\n        const getUsers = async () => {\r\n            const data = await getDocs(userCollect);\r\n            let us = data.docs.map((doc) => ({ ...doc.data(), id: doc.id }))\r\n            console.log(us)\r\n            setUsers(us)\r\n        }\r\n        getUsers();\r\n    }, []);\r\n\r\n    return (\r\n        <div>\r\n            <button onClick={() => signOut()}>Sair</button>\r\n            <h1>Bem vindo {user.displayName} Teste beta do FIREBASE em um dominio free</h1>\r\n            <input type=\"text\" placeholder='Mensagem...' value={mensagem} onChange={HandleChange} />\r\n            <button onClick={CreateMensage}>Criar</button>\r\n            {users.map((user) => {\r\n                return (\r\n                    <div key={user.id}>\r\n                        <h2>{user.name}</h2>\r\n                        <h1>{user.mensagem}</h1>\r\n                    </div>\r\n                )\r\n            })}\r\n        </div>\r\n    )\r\n\r\n}"],"mappings":"2mBAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,SAAP,KAAqB,cAArB,CACA,MAAO,oBAAP,CACA,MAAO,eAAP,CACA,OAASC,YAAT,KAA6B,2BAA7B,CACA,OAASC,iBAAT,KAAkC,gCAAlC,CACA,OAASC,UAAT,CAAqBC,SAArB,KAAsC,OAAtC,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,OAASC,iBAAT,KAAkC,2BAAlC,CACA,OAASC,MAAT,CAAiBC,UAAjB,CAA6BC,GAA7B,CAAkCC,OAAlC,CAA2CC,YAA3C,KAA+D,oBAA/D,CACA,OAASC,GAAT,KAAoB,+BAApB,C,wFAGA,MAAO,IAAMC,KAAI,CAAG,QAAPA,KAAO,EAAM,CACtB,cAA0Bd,QAAQ,CAAC,EAAD,CAAlC,wCAAOe,KAAP,eAAcC,QAAd,eACA,eAAgChB,QAAQ,EAAxC,yCAAOiB,QAAP,eAAiBC,WAAjB,eACA,eAAwBlB,QAAQ,EAAhC,yCAAOmB,IAAP,eAAaC,OAAb,eACA,gBAA0BhB,UAAU,CAACG,iBAAD,CAApC,CAAQc,IAAR,aAAQA,IAAR,CAAcC,OAAd,aAAcA,OAAd,CACA,GAAMC,GAAE,CAAGX,YAAY,CAACC,GAAD,CAAvB,CACA,GAAMW,YAAW,CAAGf,UAAU,CAACc,EAAD,CAAK,OAAL,CAA9B,CAEA,GAAME,aAAY,CAAG,QAAfA,aAAe,CAACC,KAAD,CAAW,CAC5BR,WAAW,CAACQ,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAX,CACAR,OAAO,CAACC,IAAI,CAACQ,WAAN,CAAP,CACH,CAHD,CARsB,QAaPC,cAbO,mJAatB,6KAC0BtB,OAAM,CAACgB,WAAD,CAAc,CACtCP,QAAQ,CAARA,QADsC,CAEtCE,IAAI,CAAJA,IAFsC,CAAd,CADhC,QACUY,OADV,gBAKIC,OAAO,CAACC,GAAR,CAAYF,OAAZ,EALJ,wDAbsB,gDAqBtB1B,SAAS,CAAC,UAAM,CACZ,GAAM6B,SAAQ,4FAAG,uKACMvB,QAAO,CAACa,WAAD,CADb,QACPW,IADO,eAETC,EAFS,CAEJD,IAAI,CAACE,IAAL,CAAUC,GAAV,CAAc,SAAC5B,GAAD,wCAAeA,GAAG,CAACyB,IAAJ,EAAf,MAA2BI,EAAE,CAAE7B,GAAG,CAAC6B,EAAnC,IAAd,CAFI,CAGbP,OAAO,CAACC,GAAR,CAAYG,EAAZ,EACApB,QAAQ,CAACoB,EAAD,CAAR,CAJa,sDAAH,kBAARF,SAAQ,0CAAd,CAMAA,QAAQ,GACX,CARQ,CAQN,EARM,CAAT,CAUA,mBACI,oCACI,eAAQ,OAAO,CAAE,yBAAMZ,QAAO,EAAb,EAAjB,kBADJ,cAEI,mCAAeD,IAAI,CAACQ,WAApB,gDAFJ,cAGI,cAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,aAA/B,CAA6C,KAAK,CAAEZ,QAApD,CAA8D,QAAQ,CAAEQ,YAAxE,EAHJ,cAII,eAAQ,OAAO,CAAEK,aAAjB,mBAJJ,CAKKf,KAAK,CAACuB,GAAN,CAAU,SAACjB,IAAD,CAAU,CACjB,mBACI,oCACI,oBAAKA,IAAI,CAACF,IAAV,EADJ,cAEI,oBAAKE,IAAI,CAACJ,QAAV,EAFJ,GAAUI,IAAI,CAACkB,EAAf,CADJ,CAMH,CAPA,CALL,GADJ,CAiBH,CAhDM"},"metadata":{},"sourceType":"module"}