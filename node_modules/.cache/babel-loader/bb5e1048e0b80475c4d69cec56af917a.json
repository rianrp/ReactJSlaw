{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/alans/OneDrive/\\xC1rea de Trabalho/teste/Firebaseproject/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/alans/OneDrive/\\xC1rea de Trabalho/teste/Firebaseproject/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/alans/OneDrive/\\xC1rea de Trabalho/teste/Firebaseproject/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{createContext,useEffect,useState}from\"react\";import{GoogleAuthProvider,getAuth,signInWithPopup}from\"firebase/auth\";import{app}from\"../services/firebaseConfig\";import{Navigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";var provider=new GoogleAuthProvider();export var AuthGoogleContext=/*#__PURE__*/createContext({});export var AuthGoogleProvider=function AuthGoogleProvider(_ref){var children=_ref.children;var auth=getAuth(app);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];useEffect(function(){var loadStoreAuth=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var sessionToken,sessionUser;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return sessionStorage.getItem(\"@AuthFirebase:token\");case 2:sessionToken=_context.sent;_context.next=5;return sessionStorage.getItem(\"@AuthFirebase:user\");case 5:sessionUser=_context.sent;if(sessionToken&&sessionUser){setUser(JSON.parse(sessionUser));}case 7:case\"end\":return _context.stop();}}},_callee);}));return function loadStoreAuth(){return _ref2.apply(this,arguments);};}();loadStoreAuth();},[user]);var signInGoogle=function signInGoogle(){signInWithPopup(auth,provider).then(function(result){var credential=GoogleAuthProvider.credentialFromResult(result);var token=credential.accessToken;var user=result.user;setUser(user);sessionStorage.setItem(\"@AuthFirebase:token\",token);sessionStorage.setItem(\"@AuthFirebase:user\",JSON.stringify(user));}).catch(function(error){var errorCode=error.code;var errorMessage=error.message;var email=error.customData.email;var credential=GoogleAuthProvider.credentialFromError(error);});};function signOut(){sessionStorage.clear();setUser(null);return/*#__PURE__*/_jsx(Navigate,{to:\"/\"});}return/*#__PURE__*/_jsx(AuthGoogleContext.Provider,{value:{signInGoogle:signInGoogle,signed:!!user,user:user,signOut:signOut},children:children});};","map":{"version":3,"names":["createContext","useEffect","useState","GoogleAuthProvider","getAuth","signInWithPopup","app","Navigate","provider","AuthGoogleContext","AuthGoogleProvider","children","auth","user","setUser","loadStoreAuth","sessionStorage","getItem","sessionToken","sessionUser","JSON","parse","signInGoogle","then","result","credential","credentialFromResult","token","accessToken","setItem","stringify","catch","error","errorCode","code","errorMessage","message","email","customData","credentialFromError","signOut","clear","signed"],"sources":["C:/Users/alans/OneDrive/Ãrea de Trabalho/teste/Firebaseproject/src/contexts/authGoogle.js"],"sourcesContent":["import { createContext, useEffect, useState } from \"react\";\r\nimport { GoogleAuthProvider, getAuth, signInWithPopup } from \"firebase/auth\";\r\nimport { app } from \"../services/firebaseConfig\";\r\nimport { Navigate } from \"react-router-dom\";\r\n\r\nconst provider = new GoogleAuthProvider();\r\n\r\nexport const AuthGoogleContext = createContext({})\r\n\r\nexport const AuthGoogleProvider = ({ children }) => {\r\n    const auth = getAuth(app);\r\n    const [user, setUser] = useState(null);\r\n\r\n    useEffect( () => {\r\n        const loadStoreAuth = async ()  => {\r\n            const sessionToken = await sessionStorage.getItem(\"@AuthFirebase:token\")\r\n            const sessionUser = await sessionStorage.getItem(\"@AuthFirebase:user\")\r\n\r\n            if(sessionToken && sessionUser){\r\n                setUser(JSON.parse(sessionUser));\r\n            }\r\n        }\r\n        loadStoreAuth();\r\n    }, [user])\r\n\r\n    const signInGoogle = () => {\r\n        signInWithPopup(auth, provider)\r\n            .then((result) => {\r\n                const credential = GoogleAuthProvider.credentialFromResult(result);\r\n                const token = credential.accessToken;\r\n                const user = result.user;\r\n                setUser(user)\r\n                sessionStorage.setItem(\"@AuthFirebase:token\", token);\r\n                sessionStorage.setItem(\"@AuthFirebase:user\", JSON.stringify(user));\r\n            }).catch((error) => {\r\n                const errorCode = error.code;\r\n                const errorMessage = error.message;\r\n                const email = error.customData.email;\r\n                const credential = GoogleAuthProvider.credentialFromError(error);\r\n            });\r\n    }\r\n    function signOut(){\r\n        sessionStorage.clear()\r\n        setUser(null)\r\n        return <Navigate to=\"/\"></Navigate>\r\n    }\r\n\r\n    return (\r\n        <AuthGoogleContext.Provider value={{signInGoogle, signed: !!user, user, signOut}}>\r\n            {children}\r\n        </AuthGoogleContext.Provider>\r\n    )\r\n}"],"mappings":"qdAAA,OAASA,aAAT,CAAwBC,SAAxB,CAAmCC,QAAnC,KAAmD,OAAnD,CACA,OAASC,kBAAT,CAA6BC,OAA7B,CAAsCC,eAAtC,KAA6D,eAA7D,CACA,OAASC,GAAT,KAAoB,4BAApB,CACA,OAASC,QAAT,KAAyB,kBAAzB,C,2CAEA,GAAMC,SAAQ,CAAG,GAAIL,mBAAJ,EAAjB,CAEA,MAAO,IAAMM,kBAAiB,cAAGT,aAAa,CAAC,EAAD,CAAvC,CAEP,MAAO,IAAMU,mBAAkB,CAAG,QAArBA,mBAAqB,MAAkB,IAAfC,SAAe,MAAfA,QAAe,CAChD,GAAMC,KAAI,CAAGR,OAAO,CAACE,GAAD,CAApB,CACA,cAAwBJ,QAAQ,CAAC,IAAD,CAAhC,wCAAOW,IAAP,eAAaC,OAAb,eAEAb,SAAS,CAAE,UAAM,CACb,GAAMc,cAAa,6FAAG,wLACSC,eAAc,CAACC,OAAf,CAAuB,qBAAvB,CADT,QACZC,YADY,qCAEQF,eAAc,CAACC,OAAf,CAAuB,oBAAvB,CAFR,QAEZE,WAFY,eAIlB,GAAGD,YAAY,EAAIC,WAAnB,CAA+B,CAC3BL,OAAO,CAACM,IAAI,CAACC,KAAL,CAAWF,WAAX,CAAD,CAAP,CACH,CANiB,sDAAH,kBAAbJ,cAAa,2CAAnB,CAQAA,aAAa,GAChB,CAVQ,CAUN,CAACF,IAAD,CAVM,CAAT,CAYA,GAAMS,aAAY,CAAG,QAAfA,aAAe,EAAM,CACvBjB,eAAe,CAACO,IAAD,CAAOJ,QAAP,CAAf,CACKe,IADL,CACU,SAACC,MAAD,CAAY,CACd,GAAMC,WAAU,CAAGtB,kBAAkB,CAACuB,oBAAnB,CAAwCF,MAAxC,CAAnB,CACA,GAAMG,MAAK,CAAGF,UAAU,CAACG,WAAzB,CACA,GAAMf,KAAI,CAAGW,MAAM,CAACX,IAApB,CACAC,OAAO,CAACD,IAAD,CAAP,CACAG,cAAc,CAACa,OAAf,CAAuB,qBAAvB,CAA8CF,KAA9C,EACAX,cAAc,CAACa,OAAf,CAAuB,oBAAvB,CAA6CT,IAAI,CAACU,SAAL,CAAejB,IAAf,CAA7C,EACH,CARL,EAQOkB,KARP,CAQa,SAACC,KAAD,CAAW,CAChB,GAAMC,UAAS,CAAGD,KAAK,CAACE,IAAxB,CACA,GAAMC,aAAY,CAAGH,KAAK,CAACI,OAA3B,CACA,GAAMC,MAAK,CAAGL,KAAK,CAACM,UAAN,CAAiBD,KAA/B,CACA,GAAMZ,WAAU,CAAGtB,kBAAkB,CAACoC,mBAAnB,CAAuCP,KAAvC,CAAnB,CACH,CAbL,EAcH,CAfD,CAgBA,QAASQ,QAAT,EAAkB,CACdxB,cAAc,CAACyB,KAAf,GACA3B,OAAO,CAAC,IAAD,CAAP,CACA,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAP,CACH,CAED,mBACI,KAAC,iBAAD,CAAmB,QAAnB,EAA4B,KAAK,CAAE,CAACQ,YAAY,CAAZA,YAAD,CAAeoB,MAAM,CAAE,CAAC,CAAC7B,IAAzB,CAA+BA,IAAI,CAAJA,IAA/B,CAAqC2B,OAAO,CAAPA,OAArC,CAAnC,UACK7B,QADL,EADJ,CAKH,CA3CM"},"metadata":{},"sourceType":"module"}