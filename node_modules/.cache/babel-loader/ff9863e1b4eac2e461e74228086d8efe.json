{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alans\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\teste\\\\Firebaseproject\\\\src\\\\contexts\\\\authGoogle.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useEffect, useState } from \"react\";\nimport { GoogleAuthProvider, getAuth, signInWithPopup } from \"firebase/auth\";\nimport { app } from \"../services/firebaseConfig\";\nimport { Navigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst provider = new GoogleAuthProvider();\nexport const AuthGoogleContext = /*#__PURE__*/createContext({});\nexport const AuthGoogleProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const auth = getAuth(app);\n  const [user, setUser] = useState(null);\n  useEffect(async () => {\n    const loadStoreAuth = () => {\n      const sessionToken = sessionStorage.getItem(\"@AuthFirebase:token\");\n      const sessionUser = sessionStorage.getItem(\"@AuthFirebase:user\");\n\n      if (sessionToken && sessionUser) {\n        setUser(sessionUser);\n      }\n    };\n\n    loadStoreAuth();\n  }, []);\n\n  const signInGoogle = () => {\n    signInWithPopup(auth, provider).then(result => {\n      const credential = GoogleAuthProvider.credentialFromResult(result);\n      const token = credential.accessToken;\n      const user = result.user;\n      setUser(user);\n      sessionStorage.setItem(\"@AuthFirebase:token\", token);\n      sessionStorage.setItem(\"@AuthFirebase:user\", JSON.stringify(user));\n    }).catch(error => {\n      const errorCode = error.code;\n      const errorMessage = error.message;\n      const email = error.customData.email;\n      const credential = GoogleAuthProvider.credentialFromError(error);\n    });\n  };\n\n  function signOut() {\n    sessionStorage.clear();\n    setUser(null);\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(AuthGoogleContext.Provider, {\n    value: {\n      signInGoogle,\n      signed: !!user,\n      user,\n      signOut\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AuthGoogleProvider, \"5s2qRsV95gTJBmaaTh11GoxYeGE=\");\n\n_c = AuthGoogleProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthGoogleProvider\");","map":{"version":3,"names":["createContext","useEffect","useState","GoogleAuthProvider","getAuth","signInWithPopup","app","Navigate","provider","AuthGoogleContext","AuthGoogleProvider","children","auth","user","setUser","loadStoreAuth","sessionToken","sessionStorage","getItem","sessionUser","signInGoogle","then","result","credential","credentialFromResult","token","accessToken","setItem","JSON","stringify","catch","error","errorCode","code","errorMessage","message","email","customData","credentialFromError","signOut","clear","signed"],"sources":["C:/Users/alans/OneDrive/Ãrea de Trabalho/teste/Firebaseproject/src/contexts/authGoogle.js"],"sourcesContent":["import { createContext, useEffect, useState } from \"react\";\r\nimport { GoogleAuthProvider, getAuth, signInWithPopup } from \"firebase/auth\";\r\nimport { app } from \"../services/firebaseConfig\";\r\nimport { Navigate } from \"react-router-dom\";\r\n\r\nconst provider = new GoogleAuthProvider();\r\n\r\nexport const AuthGoogleContext = createContext({})\r\n\r\nexport const AuthGoogleProvider = ({ children }) => {\r\n    const auth = getAuth(app);\r\n    const [user, setUser] = useState(null);\r\n\r\n    useEffect(async () => {\r\n        const loadStoreAuth = ()  => {\r\n            const sessionToken = sessionStorage.getItem(\"@AuthFirebase:token\")\r\n            const sessionUser = sessionStorage.getItem(\"@AuthFirebase:user\")\r\n\r\n            if(sessionToken && sessionUser){\r\n                setUser(sessionUser);\r\n            }\r\n        }\r\n        loadStoreAuth();\r\n    }, [])\r\n\r\n    const signInGoogle = () => {\r\n        signInWithPopup(auth, provider)\r\n            .then((result) => {\r\n                const credential = GoogleAuthProvider.credentialFromResult(result);\r\n                const token = credential.accessToken;\r\n                const user = result.user;\r\n                setUser(user)\r\n                sessionStorage.setItem(\"@AuthFirebase:token\", token);\r\n                sessionStorage.setItem(\"@AuthFirebase:user\", JSON.stringify(user));\r\n            }).catch((error) => {\r\n                const errorCode = error.code;\r\n                const errorMessage = error.message;\r\n                const email = error.customData.email;\r\n                const credential = GoogleAuthProvider.credentialFromError(error);\r\n            });\r\n    }\r\n    function signOut(){\r\n        sessionStorage.clear()\r\n        setUser(null)\r\n        return <Navigate to=\"/\"></Navigate>\r\n    }\r\n\r\n    return (\r\n        <AuthGoogleContext.Provider value={{signInGoogle, signed: !!user, user, signOut}}>\r\n            {children}\r\n        </AuthGoogleContext.Provider>\r\n    )\r\n}"],"mappings":";;;AAAA,SAASA,aAAT,EAAwBC,SAAxB,EAAmCC,QAAnC,QAAmD,OAAnD;AACA,SAASC,kBAAT,EAA6BC,OAA7B,EAAsCC,eAAtC,QAA6D,eAA7D;AACA,SAASC,GAAT,QAAoB,4BAApB;AACA,SAASC,QAAT,QAAyB,kBAAzB;;AAEA,MAAMC,QAAQ,GAAG,IAAIL,kBAAJ,EAAjB;AAEA,OAAO,MAAMM,iBAAiB,gBAAGT,aAAa,CAAC,EAAD,CAAvC;AAEP,OAAO,MAAMU,kBAAkB,GAAG,QAAkB;EAAA;;EAAA,IAAjB;IAAEC;EAAF,CAAiB;EAChD,MAAMC,IAAI,GAAGR,OAAO,CAACE,GAAD,CAApB;EACA,MAAM,CAACO,IAAD,EAAOC,OAAP,IAAkBZ,QAAQ,CAAC,IAAD,CAAhC;EAEAD,SAAS,CAAC,YAAY;IAClB,MAAMc,aAAa,GAAG,MAAO;MACzB,MAAMC,YAAY,GAAGC,cAAc,CAACC,OAAf,CAAuB,qBAAvB,CAArB;MACA,MAAMC,WAAW,GAAGF,cAAc,CAACC,OAAf,CAAuB,oBAAvB,CAApB;;MAEA,IAAGF,YAAY,IAAIG,WAAnB,EAA+B;QAC3BL,OAAO,CAACK,WAAD,CAAP;MACH;IACJ,CAPD;;IAQAJ,aAAa;EAChB,CAVQ,EAUN,EAVM,CAAT;;EAYA,MAAMK,YAAY,GAAG,MAAM;IACvBf,eAAe,CAACO,IAAD,EAAOJ,QAAP,CAAf,CACKa,IADL,CACWC,MAAD,IAAY;MACd,MAAMC,UAAU,GAAGpB,kBAAkB,CAACqB,oBAAnB,CAAwCF,MAAxC,CAAnB;MACA,MAAMG,KAAK,GAAGF,UAAU,CAACG,WAAzB;MACA,MAAMb,IAAI,GAAGS,MAAM,CAACT,IAApB;MACAC,OAAO,CAACD,IAAD,CAAP;MACAI,cAAc,CAACU,OAAf,CAAuB,qBAAvB,EAA8CF,KAA9C;MACAR,cAAc,CAACU,OAAf,CAAuB,oBAAvB,EAA6CC,IAAI,CAACC,SAAL,CAAehB,IAAf,CAA7C;IACH,CARL,EAQOiB,KARP,CAQcC,KAAD,IAAW;MAChB,MAAMC,SAAS,GAAGD,KAAK,CAACE,IAAxB;MACA,MAAMC,YAAY,GAAGH,KAAK,CAACI,OAA3B;MACA,MAAMC,KAAK,GAAGL,KAAK,CAACM,UAAN,CAAiBD,KAA/B;MACA,MAAMb,UAAU,GAAGpB,kBAAkB,CAACmC,mBAAnB,CAAuCP,KAAvC,CAAnB;IACH,CAbL;EAcH,CAfD;;EAgBA,SAASQ,OAAT,GAAkB;IACdtB,cAAc,CAACuB,KAAf;IACA1B,OAAO,CAAC,IAAD,CAAP;IACA,oBAAO,QAAC,QAAD;MAAU,EAAE,EAAC;IAAb;MAAA;MAAA;MAAA;IAAA,QAAP;EACH;;EAED,oBACI,QAAC,iBAAD,CAAmB,QAAnB;IAA4B,KAAK,EAAE;MAACM,YAAD;MAAeqB,MAAM,EAAE,CAAC,CAAC5B,IAAzB;MAA+BA,IAA/B;MAAqC0B;IAArC,CAAnC;IAAA,UACK5B;EADL;IAAA;IAAA;IAAA;EAAA,QADJ;AAKH,CA3CM;;GAAMD,kB;;KAAAA,kB"},"metadata":{},"sourceType":"module"}